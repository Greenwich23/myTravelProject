import{B as A,c as a,j as e,F as R,o as u,N as P,t as I,e as B,C as E,D as H,l as k}from"./index-CGLPKtmZ.js";import{u as M}from"./useDestinations-piopSIRm.js";import{l as g,f as x,y as j,P as p}from"./menu-B3zfh9d6.js";const b=["All Regions","Europe","Asia","Africa","Oceania","North America","South America"],O=["All Categories","Beach","Culture","Nature","Luxury","Adventure","Wildlife","City Life","Party","History"],T=["Most Popular","Highest Rated","Name A-Z"];function U({favorites:n,setFavorites:f}){const D=A(),d=new URLSearchParams(D.search).get("query")||"",[r,C]=a.useState(()=>localStorage.getItem("selectedRegion")||"All Regions"),[i,y]=a.useState(()=>localStorage.getItem("discoverSelectedCategory")||"All Categories"),[t,S]=a.useState(()=>localStorage.getItem("destinationSortBy")||"Most popular"),[l,N]=a.useState(d),L=s=>{console.log("Perform side effect after data fetching",s)},w=s=>{console.log("Perform side effect after encountering error ",s)},{data:m}=M(w,L);console.log(m),a.useEffect(()=>{localStorage.setItem("selectedRegion",r)},[r]),a.useEffect(()=>{localStorage.setItem("discoverSelectedCategory",i)},[i]),a.useEffect(()=>{localStorage.setItem("destinationSortBy",t)},[t]),a.useEffect(()=>{N(d)},[d]);const v=a.useMemo(()=>{let s=m?.data||[];return r&&r!=="All Regions"&&(s=s.filter(o=>o.region===r),console.log("others"),console.log(r)),i&&i!=="All Categories"&&(s=s.filter(o=>o.category.includes(i))),l&&l!==""&&(s=s.filter(o=>o.name.toLowerCase().includes(l.toLowerCase())||o.country.toLowerCase().includes(l.toLowerCase())),console.log(l)),t==="Most Popular"?s=[...s].sort((o,c)=>new Date(c.reviews)-new Date(o.reviews)):t==="Name A-Z"?s=[...s].sort((o,c)=>o.name.localeCompare(c.name)):t==="Highest Rated"&&(s=[...s].sort((o,c)=>o.rating-c.rating)),s},[m,i,t,l,r]);return console.log(v),e.jsxs("div",{className:"discoverPage",id:"home",children:[e.jsx("div",{className:"discoverContainer",children:e.jsxs("div",{className:"discoverTextHolder",children:[e.jsx("h3",{children:"Discover Amazing Destinations"}),e.jsx("p",{children:"Explore the world's most beautiful places with real-time information"}),e.jsxs("div",{className:"discoverSearchDiv",tabindex:"0",children:[e.jsx(R,{className:"searchIcon"}),e.jsx("input",{type:"text",className:"discoverInput",placeholder:"Search Destinations or Countries...",onChange:s=>N(s.target.value),value:l})]})]})}),e.jsxs("section",{className:"discoverLocationContainer",children:[e.jsx("div",{className:"discoverLocationDiv",children:e.jsxs("div",{className:"discoverFilterDiv",children:[e.jsxs("div",{className:"discoverFilters",children:[e.jsxs(g,{as:"div",className:"discoverDropDownDiv",children:[e.jsxs(x,{as:"div",className:"discoverMenuButton",children:[e.jsx("p",{children:r}),e.jsx(u,{})]}),e.jsx(j,{anchor:"bottom",as:"div",className:"discoverFilterDropDown",children:b.map(s=>e.jsx(p,{as:"p",className:"discoverOptions",onClick:()=>C(s),children:s},s))})]}),e.jsxs(g,{as:"div",className:"discoverDropDownDiv",children:[e.jsxs(x,{as:"div",className:"discoverMenuButton",children:[e.jsx("p",{children:i}),e.jsx(u,{})]}),e.jsx(j,{anchor:"bottom",as:"div",className:"discoverFilterDropDown",children:O.map(s=>e.jsx(p,{as:"p",className:"discoverOptions",onClick:()=>y(s),children:s},s))})]}),e.jsxs(g,{as:"div",className:"discoverDropDownDiv",children:[e.jsxs(x,{as:"div",className:"discoverMenuButton",children:[e.jsx("p",{children:t}),e.jsx(u,{})]}),e.jsx(j,{anchor:"bottom",as:"div",className:"discoverFilterDropDown",children:T.map(s=>e.jsx(p,{as:"p",className:"discoverOptions",onClick:()=>S(s),children:s},s))})]})]}),e.jsxs("p",{className:"discoverDestinationp",children:[v.length," destinations Found"]})]})}),e.jsx("div",{className:"discoverLocationSubDiv",children:v.map(s=>{const o=n.some(h=>h.id===s.id),c=h=>{h.preventDefault(),f(o?n.filter(F=>F.id!==s.id):[...n,{...s,savedAt:new Date().toISOString()}])};return console.log("favorites",n),e.jsxs(P,{className:"discoverLocationFigure",to:`/discover/${s.id}`,children:[e.jsx("img",{src:s.image,alt:"",className:"discoverLocationFigureImage"}),o?e.jsx(I,{className:"discoverHeartIcon",style:{color:"crimson"},onClick:c}):e.jsx(B,{className:"discoverHeartIcon",style:{color:"gray"},onClick:c}),e.jsxs("div",{className:"discoverLocationText",children:[e.jsx("h2",{className:"discoverLocationFigureh2",children:s.name}),e.jsxs("div",{className:"discoverLocationCountry",children:[e.jsx(E,{}),e.jsx("p",{children:s.country})]}),e.jsxs("div",{className:"discoverTemp",children:[e.jsxs("p",{children:[e.jsx(H,{})," ",s.weather.temperature]}),"â€¢",e.jsxs("p",{children:[e.jsx(k,{})," ",s.timezone]})]}),e.jsx("p",{children:s.weather.condition}),e.jsxs("div",{className:"discoverLocationCatgeoryDiv",children:[e.jsx("p",{className:"discoverLocationCategory",children:s.category[0]}),e.jsx("p",{className:"discoverLocationCategory",children:s.category[1]}),e.jsx("p",{className:"discoverLocationCategory",children:s.category[2]})]})]})]})})})]})]})}export{U as default};
