import{u as N,a as S,c as i,j as e,F as D,n as F,o as h,l as y}from"./index-CGLPKtmZ.js";import{C}from"./index-DFHRFcUT.js";import{l as m,f as u,y as x,P as g}from"./menu-B3zfh9d6.js";function A(){return S.get("/articles.json")}const w=(t,o)=>N({queryKey:["ArticlesData"],queryFn:()=>A(),onError:t,onSuccess:o,refetchOnMount:!0,refetchOnWindowFocus:!0}),T=["All Articles","Adventure","Food & Culture","Digital Nomad","Beach Escapes","Sustainable Travel","Photography","Travel Philosophy","Budget Travel","Cultural Journeys"],P=["Most Recent","Reading Time","Title A-Z"];function M(){const[t,o]=i.useState(()=>localStorage.getItem("articleSelectedCategory")||"All Articles"),[l,j]=i.useState(()=>localStorage.getItem("articleSortBy")||"Recent"),[r,f]=i.useState(()=>localStorage.getItem("articleSearchedFilter")||""),p=s=>{console.log("Perform side effect after data fetching",s)},v=s=>{console.log("Perform side effect after encountering error ",s)},{data:n}=w(v,p);i.useEffect(()=>{localStorage.setItem("articleSelectedCategory",t)},[t]),i.useEffect(()=>{localStorage.setItem("articleSortBy",l)},[l]),i.useEffect(()=>{localStorage.setItem("articleSearchedFilter",r)},[r]);const d=i.useMemo(()=>{let s=n?.data||[];return t&&t!=="All Articles"&&(s=s.filter(a=>a.category===t),console.log("others")),r&&r!==""&&(s=s.filter(a=>a.title.toLowerCase().includes(r.toLowerCase())||a.author.toLowerCase().includes(r.toLowerCase())),console.log(r)),l==="Most Recent"?s=[...s].sort((a,c)=>new Date(c.date)-new Date(a.date)):l==="Title A-Z"?s=[...s].sort((a,c)=>a.title.localeCompare(c.title)):l==="Reading Time"&&(s=[...s].sort((a,c)=>a.readTime-c.readTime)),s},[n,t,l,r]);return e.jsxs("div",{className:"articlesPage",id:"home",children:[e.jsx("div",{className:"articleDiv",children:e.jsxs("div",{className:"articleText",children:[e.jsx("h3",{children:"Travel Stories & Guides"}),e.jsx("p",{className:"articleParagraph",children:"Discover inspiring stories, practical guides, and insider tips from fellow travelers and travel experts around the world."}),e.jsxs("div",{className:"articleFiltersDiv",children:[e.jsxs("div",{className:"filters",id:"articlesFilterSearch",children:[e.jsx(D,{}),e.jsx("input",{type:"text",className:"",placeholder:"Search articles, authors, tags...",value:r||"",onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"filters",children:[e.jsx(F,{}),e.jsxs(m,{as:"div",className:"articlesDropDownDiv",children:[e.jsxs(u,{as:"div",className:"articlesMenuButton",children:[e.jsx("p",{children:t}),e.jsx(h,{})]}),e.jsx(x,{anchor:"bottom",as:"div",className:"articlesFilterDropDown",children:T.map(s=>e.jsx(g,{as:"p",className:"articleOptions",onClick:()=>o(s),children:s},s))})]})]}),e.jsx("div",{className:"filters",children:e.jsxs(m,{as:"div",className:"articlesDropDownDiv",children:[e.jsxs(u,{as:"div",className:"articlesMenuButton",children:[e.jsx("p",{children:l}),e.jsx(h,{})]}),e.jsx(x,{anchor:"bottom",as:"div",className:"articlesFilterDropDown",children:P.map(s=>e.jsx(g,{as:"p",className:"articleOptions",onClick:()=>j(s),children:s},s))})]})})]})]})}),e.jsx("div",{className:"articlesContainer",children:e.jsxs("div",{className:"articlesContainerSubDiv",children:[e.jsxs("p",{className:"showingArticles",children:["Showing ",d.length," articles"]}),e.jsx("hr",{}),e.jsx("h3",{children:"Featured Articles"}),e.jsx("div",{className:"articlesHolder",children:d.map(s=>e.jsxs("figure",{className:"articleFigure",children:[e.jsx("p",{className:"articleCategory",children:s.category}),e.jsx("img",{src:s.image,alt:"",className:"articleImg"}),e.jsxs("div",{className:"articleFigureText",children:[e.jsx("a",{href:s.externalUrl,className:"articleTitle",children:s.title}),e.jsx("p",{children:s.excerpt}),e.jsxs("div",{className:"articleFigureTags",children:[e.jsx("span",{className:"tags",children:s.tags[0]}),e.jsx("span",{className:"tags",children:s.tags[1]}),e.jsx("span",{className:"tags",children:s.tags[2]})]}),e.jsxs("div",{className:"articleFigureInfo",children:[e.jsxs("div",{className:"articleFigureInfoflex",children:[e.jsx(C,{}),e.jsx("p",{className:"articleAuthor",children:s.author})]}),e.jsxs("p",{className:"articleDate",children:[s.publishDate," â€¢ ",e.jsx(y,{})," ",s.readTime,"min"]})]})]})]}))})]})})]})}export{M as default};
